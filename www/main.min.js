!function(){"use strict";function o(o){o.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleLightContent()})}function i(o,i,r){o.html5Mode(!0),r.otherwise("/lists")}angular.module("fsr",["ionic","config","auth","lists","venues"]).run(["$ionicPlatform",o]).config(["$locationProvider","$stateProvider","$urlRouterProvider",i])}();
!function(){"use strict";function t(t,a){a.state("auth",{url:"/auth",templateUrl:"./fsr/auth/index.html",controller:"AuthController as auth"})}function a(t,a,r){t.$on("$stateChangeStart",function(t,o){return"auth"===o.name?!1:void(r.isLoggedIn()||(t.preventDefault(),a.go("auth")))})}angular.module("auth",["ui.router","angular-storage","ngCordovaOauth"]).config(["$httpProvider","$stateProvider",t]).run(["$rootScope","$state","authFactory",a])}();
!function(){"use-strict";function n(n,e){e.setBaseUrl(n.host),e.setResponseExtractor(function(n){return n.response})}angular.module("config",["restangular"]).config(["FS_CONFIG","RestangularProvider",n])}();
!function(){"use strict";function t(t,r){t.state("list",{url:"/lists",templateUrl:"./fsr/lists/index.html",controller:"ListController as list",resolve:{venue:["listsFactory",function(t){return t.get()}]}})}angular.module("lists",["ui.router","restangular","venues"]).config(["$stateProvider","$urlRouterProvider",t])}();
!function(){"use strict";function r(r,u){}angular.module("venues",["ui.router","restangular"]).config(["$stateProvider","$urlRouterProvider",r])}();
!function(){"use strict";function n(n){this.fsLoginUrl=n.getLoginUrl(),this.isLoggedIn=function(){return n.isLoggedIn()},this.login=function(){return n.login()}}angular.module("auth").controller("AuthController",["authFactory",n])}();
!function(){"use strict";function t(t,n,e){function r(){return t.foursquare(e.client_id).then(function(t){console.log(t),a(t.token)},function(t){console.error(t)})}function o(){var t=e.authenticateUrl,n=["client_id="+e.client_id,"response_type="+e.response_type,"redirect_uri="+e.redirect_uri].join("&");return t+"?"+n}function u(){return n.get(c)}function a(t){return n.set(c,t)}function i(){return Boolean(n.get(c))}var c="fsr:token";return{getLoginUrl:o,getToken:u,saveToken:a,isLoggedIn:i,login:r}}function n(t){return{request:function(n){return n.params=n.params||{},n.params.oauth_token=t.getToken(),n.params.v="20150801",n}}}angular.module("auth").factory("authInterceptor",["authFactory",n]).factory("authFactory",["$cordovaOauth","store","FS_CONFIG",t])}();
!function(){"use-strict";angular.module("config").constant("FS_CONFIG",{client_id:"YMV0WS2FQOEO30MCSL3043EXUSFPPSNCCXKLY22QLSSV3I04",host:"https://api.foursquare.com/v2",authenticateUrl:"https://foursquare.com/oauth2/authenticate",response_type:"token",redirect_uri:" http://localhost:3000/auth/callback/"}).constant("MAPBOX_CONFIG",{access_token:"pk.eyJ1IjoiYWdjb250aSIsImEiOiIwM2IwMzBiNGRjZTliYzRmNjE2NWUyOTUwY2JjMzlkNCJ9.VNRiqDn4uzm3UYTPEeokvg",map_type:"agconti.n80c1obe",map_options:{zoomControl:!1,accessToken:"pk.eyJ1IjoiYWdjb250aSIsImEiOiIwM2IwMzBiNGRjZTliYzRmNjE2NWUyOTUwY2JjMzlkNCJ9.VNRiqDn4uzm3UYTPEeokvg",attributionControl:{compact:!0}}})}();
!function(){"use strict";function t(t,e,n,o){var i=this;i.venue=t,o.setLocation(t.location.lat,t.location.lng),i.get=function(){n.get().then(function(t){i.venue=t})["finally"](function(){e.$broadcast("scroll.refreshComplete")})},i.getImageUrl=function(){var t=i.venue.bestPhoto.prefix,e=[828,628].join("x"),n=i.venue.bestPhoto.suffix;return[t,e,n].join("")}}angular.module("lists").controller("ListController",["venue","$scope","listsFactory","mapFactory",t])}();
!function(){"use strict";function t(t){return t.withConfig(function(t){t.setResponseExtractor(function(t){return t.list.listItems.items})})}function n(t){return t.withConfig(function(t){t.setResponseExtractor(function(t){return t.lists.groups})})}function e(t,n,e){function r(){return h.getList().$object}function s(t){return t[Math.floor(Math.random()*t.length)]}function i(t){for(var n=t.length,e=0,r=[];n>e&&(r=s(t),!r.items.length);e++)t.slice(t.indexOf(r),1);return r}function u(t){var n=i(t),e=s(n.items);return l.one(e.id).get().then(s)}function o(n){return t.get(n.venue.id)}function a(){return h.getList().then(u).then(o)}var c="lists",l=n.all(c),f="users/self",g=f+"/"+c,h=e.all(g);return{getListsGroups:r,get:a}}angular.module("lists").factory("UserListsRestangular",["Restangular",n]).factory("ListsRestangular",["Restangular",t]).factory("listsFactory",["venuesFactory","ListsRestangular","UserListsRestangular",e])}();
!function(){"use strict";function e(e){return e.withConfig(function(e){e.setResponseExtractor(function(e){return e.venue})})}function n(e){function n(e){return t.one(e).get()}var t=e.all("venues");return{get:n}}function t(e){function n(e,n){var o=[e,n],r=17;a.setView(o,r),t.marker(o).addTo(a)}var t=window.L,a=t.mapbox.map("map",e.map_type,e.map_options);return a.dragging.disable(),a.doubleClickZoom.disable(),a.scrollWheelZoom.disable(),{setLocation:n}}angular.module("venues").factory("VenuesRestangular",["Restangular",e]).factory("venuesFactory",["VenuesRestangular",n]).factory("mapFactory",["MAPBOX_CONFIG",t])}();